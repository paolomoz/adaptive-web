name = "adaptive-web-api"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Force worker to run in US (Western North America) for Gemini image generation
[placement]
mode = "smart"
hint = "wnam"

[vars]
SUPABASE_URL = "https://jdclzklyiosyfyzoxeho.supabase.co"

# Secrets (set via wrangler secret put):
# - ANTHROPIC_API_KEY
# - SUPABASE_SERVICE_KEY
# - GOOGLE_SERVICE_ACCOUNT_KEY (for Imagen 3)
# - GOOGLE_CLOUD_PROJECT (for Imagen 3)
# - OPENAI_API_KEY (for RAG embeddings - optional)
# - GEMINI_API_KEY (for flexible layout pipeline - enables Gemini block selection)

[[r2_buckets]]
binding = "IMAGES"
bucket_name = "adaptive-web-images"
