<div><h1 id="rag-improvements-plan">RAG Improvements Plan</h1><h2 id="status-in-progress">Status: In Progress</h2><p>Crawl running: ~500/2900 sources, ~1400 images uploaded</p><h2 id="improvement-order">Improvement Order</h2><h3 id="phase-1-query-classification-next">Phase 1: Query Classification (NEXT)</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Classify incoming queries by type: product, recipe, blog, support, general</li>
<li class="task-list-item"><input type="checkbox" disabled> Route queries to prioritize relevant source types</li>
<li class="task-list-item"><input type="checkbox" disabled> Foundation for smarter image/content matching</li>
</ul><h3 id="phase-2-image-search-via-vectorize">Phase 2: Image Search via Vectorize</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Create embeddings for image alt_text + context</li>
<li class="task-list-item"><input type="checkbox" disabled> Store in separate Vectorize index (or add image flag to existing)</li>
<li class="task-list-item"><input type="checkbox" disabled> Enable semantic image search: "smoothie" â†’ smoothie photos</li>
</ul><h3 id="phase-3-use-rag-images--hybrid-strategy">Phase 3: Use RAG Images + Hybrid Strategy</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Products: Always use real product images from RAG</li>
<li class="task-list-item"><input type="checkbox" disabled> Recipes: Use real recipe photos from RAG</li>
<li class="task-list-item"><input type="checkbox" disabled> Hero/lifestyle: Generate with Imagen (creative freedom)</li>
<li class="task-list-item"><input type="checkbox" disabled> Match images to content based on semantic similarity</li>
</ul><h3 id="phase-4-better-content-chunking-next-crawl">Phase 4: Better Content Chunking (next crawl)</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Semantic chunking by paragraphs/sections</li>
<li class="task-list-item"><input type="checkbox" disabled> Include richer metadata: product name, category, price</li>
<li class="task-list-item"><input type="checkbox" disabled> Better context preservation</li>
</ul><h3 id="phase-5-caching-layer">Phase 5: Caching Layer</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Cache RAG results for common queries</li>
<li class="task-list-item"><input type="checkbox" disabled> Reduce latency and API costs</li>
<li class="task-list-item"><input type="checkbox" disabled> Consider KV or D1 for cache storage</li>
</ul><h3 id="phase-6-image-deduplication-next-crawl">Phase 6: Image Deduplication (next crawl)</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled> Hash images by source URL before upload</li>
<li class="task-list-item"><input type="checkbox" disabled> Skip duplicates to save R2 storage</li>
<li class="task-list-item"><input type="checkbox" disabled> Update crawler script</li>
</ul></div>
<div><h2 id="notes">Notes</h2><ul>
<li>Phases 1-3, 5 can be done while crawl is running</li>
<li>Phases 4, 6 require crawler modifications (next crawl)</li>
<li>Test each phase before moving to next</li>
</ul></div>